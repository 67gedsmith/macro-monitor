<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Monitor - BMR Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Macro Monitor - BMR & Macro Calculator</h1>
        
        <div id="userSelectionSection" class="section">
            <h2>User Management</h2>
            <div class="user-controls">
                <div class="form-group">
                    <label for="userSelect">Select User:</label>
                    <select id="userSelect">
                        <option value="">-- Create New User --</option>
                    </select>
                </div>
                <button type="button" id="deleteUserBtn" class="btn-danger" style="display:none;">Delete Current User</button>
            </div>
        </div>
        
        <div id="profileSection" class="section">
            <h2>User Profile</h2>
            <form id="profileForm">
                <div class="form-group">
                    <label for="userName">User Name:</label>
                    <input type="text" id="userName" placeholder="Enter name" autocomplete="off" tabindex="1" required>
                </div>
                
                <div class="form-group">
                    <label for="sex">Sex:</label>
                    <select id="sex" tabindex="2" required>
                        <option value="">Select...</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="age">Age (years):</label>
                    <input type="number" id="age" min="15" max="120" autocomplete="off" tabindex="3" required>
                </div>
                
                <div class="form-group">
                    <label>Height:</label>
                    <div class="unit-selector">
                        <label><input type="radio" name="heightUnit" value="cm" checked> Centimeters</label>
                        <label><input type="radio" name="heightUnit" value="ft"> Feet & Inches</label>
                    </div>
                    <div id="heightCm" class="height-input">
                        <input type="number" id="height" min="100" max="250" step="0.1" placeholder="cm" autocomplete="off" required>
                    </div>
                    <div id="heightFt" class="height-input" style="display:none; white-space: nowrap;">
                        <input type="number" id="heightFeet" min="3" max="8" step="1" placeholder="Feet" style="width: 48%; display: inline-block; margin-right: 2%;" autocomplete="off">
                        <input type="number" id="heightInches" min="0" max="11" step="0.1" placeholder="Inches" style="width: 48%; display: inline-block;" autocomplete="off">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="activityLevel">Activity Level:</label>
                    <select id="activityLevel" required>
                        <option value="">Select...</option>
                        <option value="1.2">Sedentary (little or no exercise)</option>
                        <option value="1.375">Lightly Active (exercise 1-3 days/week)</option>
                        <option value="1.55">Moderately Active (exercise 3-5 days/week)</option>
                        <option value="1.725">Very Active (exercise 6-7 days/week)</option>
                        <option value="1.9">Extra Active (very intense exercise daily)</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-primary">Save Profile</button>
                <button type="button" id="continueToWeightBtn" class="btn-secondary" style="display:none;">Continue to Weight Entry →</button>
            </form>
        </div>
        
        <div id="weightSection" class="section" style="display:none;">
            <h2>Weight Entry</h2>
            <button type="button" id="backToProfileBtn" class="btn-secondary" style="margin-bottom: 20px;">← Back to Profile</button>
            <form id="weightForm">
                <div class="form-group">
                    <label>Current Weight:</label>
                    <div class="unit-selector">
                        <label><input type="radio" name="weightUnit" value="kg" checked> Kilograms</label>
                        <label><input type="radio" name="weightUnit" value="st"> Stones & Pounds</label>
                    </div>
                    <div id="weightKg" class="weight-input">
                        <input type="number" id="weight" min="30" max="300" step="0.1" placeholder="kg" required>
                    </div>
                    <div id="weightSt" class="weight-input" style="display:none; white-space: nowrap;">
                        <input type="number" id="weightStones" min="5" max="50" step="1" placeholder="Stones" style="width: 48%; display: inline-block; margin-right: 2%;">
                        <input type="number" id="weightPounds" min="0" max="13" step="0.1" placeholder="Pounds" style="width: 48%; display: inline-block;">
                    </div>
                </div>
                <button type="submit" class="btn-primary">Calculate</button>
                <button type="button" id="editProfile" class="btn-secondary">Edit Profile</button>
            </form>
        </div>
        
        <div id="resultsSection" class="section" style="display:none;">
            <h2>Results for <span id="resultsUserName"></span></h2>
            <button type="button" id="backToWeightBtn" class="btn-secondary" style="margin-bottom: 20px;">← Back to Weight Entry</button>
            
            <div class="result-card">
                <h3>Basal Metabolic Rate (BMR)</h3>
                <p class="result-value" id="bmrValue">-</p>
                <p class="result-explanation">Your BMR is the number of calories your body burns at rest just to maintain vital functions.</p>
            </div>
            
            <div class="result-card">
                <h3>Total Daily Energy Expenditure (TDEE)</h3>
                <p class="result-value" id="tdeeValue">-</p>
                <p class="result-explanation">Your TDEE is the total calories you burn daily including all activities and exercise.</p>
            </div>
            
            <h3>Weight Loss Targets</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Target</th>
                        <th>Daily Calories</th>
                        <th>Weekly Deficit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Lose 0.5 lb/week</td>
                        <td id="loss05">-</td>
                        <td>1,750 kcal</td>
                    </tr>
                    <tr>
                        <td>Lose 1 lb/week</td>
                        <td id="loss10">-</td>
                        <td>3,500 kcal</td>
                    </tr>
                    <tr class="highlight">
                        <td><strong>Lose 1.5 lb/week</strong></td>
                        <td id="loss15"><strong>-</strong></td>
                        <td>5,250 kcal</td>
                    </tr>
                    <tr>
                        <td>Lose 2 lb/week</td>
                        <td id="loss20">-</td>
                        <td>7,000 kcal</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Macro Breakdown</h3>
            <div class="form-group" style="max-width: 400px; margin-bottom: 20px;">
                <label for="weightLossTarget">Weight Loss Target:</label>
                <select id="weightLossTarget">
                    <option value="loss05">Lose 0.5 lb/week</option>
                    <option value="loss10">Lose 1 lb/week</option>
                    <option value="loss15" selected>Lose 1.5 lb/week</option>
                    <option value="loss20">Lose 2 lb/week</option>
                </select>
            </div>
            <div class="macro-controls">
                <button type="button" id="customizeMacrosBtn" class="btn-secondary">Customize Macro Percentages</button>
            </div>
            
            <div id="macroCustomizationSection" style="display:none;">
                <div class="form-group">
                    <label for="proteinPercent">Protein %:</label>
                    <input type="number" id="proteinPercent" min="0" max="100" step="1" value="35">
                </div>
                <div class="form-group">
                    <label for="carbsPercent">Carbohydrates %:</label>
                    <input type="number" id="carbsPercent" min="0" max="100" step="1" value="35">
                </div>
                <div class="form-group">
                    <label for="fatPercent">Fat %:</label>
                    <input type="number" id="fatPercent" min="0" max="100" step="1" value="30">
                </div>
                <div class="info-box" id="macroValidation">
                    <p><strong>Total:</strong> <span id="totalMacroPercent">100</span>% (must equal 100%)</p>
                </div>
                <button type="button" id="saveMacrosBtn" class="btn-primary">Save Macro Settings</button>
                <button type="button" id="cancelMacrosBtn" class="btn-secondary">Cancel</button>
            </div>
            
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Macronutrient</th>
                        <th>Percentage</th>
                        <th>Calories</th>
                        <th>Grams</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Protein</td>
                        <td id="proteinPercent-display">35%</td>
                        <td id="proteinKcal">-</td>
                        <td id="proteinGrams">-</td>
                    </tr>
                    <tr>
                        <td>Carbohydrates</td>
                        <td id="carbsPercent-display">35%</td>
                        <td id="carbsKcal">-</td>
                        <td id="carbsGrams">-</td>
                    </tr>
                    <tr>
                        <td>Fat</td>
                        <td id="fatPercent-display">30%</td>
                        <td id="fatKcal">-</td>
                        <td id="fatGrams">-</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="info-box">
                <p><strong>Note:</strong> These calculations are based on the Mifflin-St Jeor Equation. 
                Your target is set to lose 1.5 pounds per week. This requires a daily calorie deficit of 750 kcal.</p>
                <div style="margin-top: 15px;">
                    <button type="button" id="showKatchMcArdleBtn" class="btn-secondary">Calculate Using Body Fat % (Katch-McArdle)</button>
                    <button type="button" id="hideKatchMcArdleSectionBtn" class="btn-secondary" style="display:none; margin-left: 10px;">Hide Katch-McArdle Results</button>
                </div>
            </div>
            
            <div id="katchMcArdleSection" style="display:none; margin-top: 20px;">
                <h3>Katch-McArdle Formula (Body Fat Based)</h3>
                <div class="form-group" style="max-width: 300px;">
                    <label for="bodyFatPercent">Body Fat Percentage:</label>
                    <input type="number" id="bodyFatPercent" min="5" max="50" step="0.1" placeholder="e.g., 25.5">
                    <small style="color: #666; display: block; margin-top: 5px;">Enter your body fat % (typically 10-30%)</small>
                </div>
                <button type="button" id="calculateKatchMcArdleBtn" class="btn-primary">Calculate</button>
                <button type="button" id="hideKatchMcArdleBtn" class="btn-secondary">Cancel</button>
                
                <div id="katchMcArdleResults" style="display:none; margin-top: 20px;">
                    <div class="result-card">
                        <h3>Katch-McArdle BMR</h3>
                        <p class="result-value" id="katchBmrValue">-</p>
                        <p class="result-explanation">BMR calculated using lean body mass (more accurate if you know your body fat %).</p>
                    </div>
                    
                    <div class="result-card">
                        <h3>Katch-McArdle TDEE</h3>
                        <p class="result-value" id="katchTdeeValue">-</p>
                        <p class="result-explanation">Your total daily energy expenditure based on lean body mass.</p>
                    </div>
                    
                    <h3>Weight Loss Targets (Katch-McArdle)</h3>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Target</th>
                                <th>Daily Calories</th>
                                <th>Weekly Deficit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Lose 0.5 lb/week</td>
                                <td id="katchLoss05">-</td>
                                <td>1,750 kcal</td>
                            </tr>
                            <tr>
                                <td>Lose 1 lb/week</td>
                                <td id="katchLoss10">-</td>
                                <td>3,500 kcal</td>
                            </tr>
                            <tr class="highlight">
                                <td><strong>Lose 1.5 lb/week</strong></td>
                                <td id="katchLoss15"><strong>-</strong></td>
                                <td>5,250 kcal</td>
                            </tr>
                            <tr>
                                <td>Lose 2 lb/week</td>
                                <td id="katchLoss20">-</td>
                                <td>7,000 kcal</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="info-box" style="margin-top: 15px;">
                        <p><strong>Lean Body Mass:</strong> <span id="leanBodyMass">-</span> kg</p>
                        <p style="margin-top: 10px;"><strong>Note:</strong> The Katch-McArdle formula is often more accurate for individuals who know their body fat percentage, as it accounts for lean muscle mass.</p>
                    </div>
                    
                    <h3>Macro Breakdown (Katch-McArdle)</h3>
                    <div class="form-group" style="max-width: 400px; margin-bottom: 20px;">
                        <label for="katchWeightLossTarget">Weight Loss Target:</label>
                        <select id="katchWeightLossTarget">
                            <option value="loss05">Lose 0.5 lb/week</option>
                            <option value="loss10">Lose 1 lb/week</option>
                            <option value="loss15" selected>Lose 1.5 lb/week</option>
                            <option value="loss20">Lose 2 lb/week</option>
                        </select>
                    </div>
                    <div class="macro-controls">
                        <button type="button" id="katchCustomizeMacrosBtn" class="btn-secondary">Customize Macro Percentages</button>
                    </div>
                    
                    <div id="katchMacroCustomizationSection" style="display:none;">
                        <div class="form-group">
                            <label for="katchProteinPercent">Protein %:</label>
                            <input type="number" id="katchProteinPercent" min="0" max="100" step="1" value="35">
                        </div>
                        <div class="form-group">
                            <label for="katchCarbsPercent">Carbohydrates %:</label>
                            <input type="number" id="katchCarbsPercent" min="0" max="100" step="1" value="35">
                        </div>
                        <div class="form-group">
                            <label for="katchFatPercent">Fat %:</label>
                            <input type="number" id="katchFatPercent" min="0" max="100" step="1" value="30">
                        </div>
                        <div class="info-box" id="katchMacroValidation">
                            <p><strong>Total:</strong> <span id="katchTotalMacroPercent">100</span>% (must equal 100%)</p>
                        </div>
                        <button type="button" id="katchSaveMacrosBtn" class="btn-primary">Save Macro Settings</button>
                        <button type="button" id="katchCancelMacrosBtn" class="btn-secondary">Cancel</button>
                    </div>
                    
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Macronutrient</th>
                                <th>Percentage</th>
                                <th>Calories</th>
                                <th>Grams</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Protein</td>
                                <td id="katchProteinPercent-display">35%</td>
                                <td id="katchProteinKcal">-</td>
                                <td id="katchProteinGrams">-</td>
                            </tr>
                            <tr>
                                <td>Carbohydrates</td>
                                <td id="katchCarbsPercent-display">35%</td>
                                <td id="katchCarbsKcal">-</td>
                                <td id="katchCarbsGrams">-</td>
                            </tr>
                            <tr>
                                <td>Fat</td>
                                <td id="katchFatPercent-display">30%</td>
                                <td id="katchFatKcal">-</td>
                                <td id="katchFatGrams">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
